---
description: Estructura y convenciones de application.yml
globs: "**/*.yml,**/*.yaml"
alwaysApply: false
---

# Configuración YAML

- **Perfiles**: `spring.profiles.active` (p. ej. `local`); bloques por perfil con `spring.config.activate.on-profile`.
- **Secrets**: En `local` pueden ir valores por defecto; en `prod` usar siempre variables de entorno (ej. `${DB_WOW_CLIENT_HOST_AUTH}`, `${WOW_CLIENT_SECRET_JWT}`).
- **Naming**: Claves en `kebab-case` (ej. `default-uri`, `secret-key`). Jackson está en `SNAKE_CASE` para JSON; la config sigue kebab-case.
- **Estructura**: `spring.*` para Boot/JPA/datasource; `application.*` para URLs, seguridad y reinos; `soap.client.*` para el cliente SOAP.
- **Datasources**: `spring.datasource.primary` es AUTH (único). Characters y World son por reino: `application.realms[].id`, `application.realms[].characters` y `application.realms[].world` (url, username, password, driver-class-name). Añadir más reinos añadiendo ítems a `application.realms`.
- **SOAP por reino**: Cada reino puede definir `application.realms[].soap` con `username` y `password` (credenciales GM para Basic Auth hacia el emulador). Si no se define, las llamadas SOAP para ese reino fallarán.

Consistencia con la jerarquía actual evita conflictos y facilita el despliegue por entorno.
